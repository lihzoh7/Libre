<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>SPACE GLASS - Main Menu</title>
<style>
body {
  margin:0; padding:0; font-family: Arial, sans-serif;
  background: url('https://images.unsplash.com/photo-1549924231-f129b911e442?auto=format&fit=crop&w=1470&q=80') no-repeat center center fixed;
  background-size: cover;
  height:100vh;
  overflow:hidden;
}
#glass {
  position:absolute;
  top:50%; left:50%;
  width:350px; height:350px;
  background: rgba(255,255,255,0.1);
  border-radius:50%;
  transform: translate(-50%, -50%) rotate(15deg);
}
.tabs {
  position:absolute; bottom:50px; width:100%;
  display:flex; justify-content:center; gap:20px;
}
.tab {
  width:100px; height:50px; background:rgba(255,255,255,0.2);
  display:flex; justify-content:center; align-items:center;
  border-radius:8px; cursor:pointer; font-weight:bold; color:white;
}
#logout { position:absolute; top:10px; left:10px; cursor:pointer; font-size:24px; color:white; }
#profile { position:absolute; top:10px; right:10px; cursor:pointer; font-size:24px; color:white; }
#messages { position:absolute; top:10px; right:50px; cursor:pointer; font-size:24px; color:white; }
</style>
</head>
<body>

<div id="glass"></div>

<div id="logout">ðŸ”™</div>
<div id="messages">âœ‰</div>
<div id="profile">ðŸ‘¤</div>

<div class="tabs">
  <div class="tab" id="prizesTab">PRIZES</div>
  <div class="tab" id="scoresTab">SCORES</div>
  <div class="tab" id="playTab">PLAY</div>
  <div class="tab" id="walletTab">WALLET</div>
</div>
<script type="module">
import { initializeApp } from "https://www.gstatic.com/firebasejs/9.23.0/firebase-app.js";
import { getAuth, onAuthStateChanged, signOut } from "https://www.gstatic.com/firebasejs/9.23.0/firebase-auth.js";
import { getDatabase } from "https://www.gstatic.com/firebasejs/9.23.0/firebase-database.js";

// Firebase Config (UNCHANGED)
const firebaseConfig = {
  apiKey: "AIzaSyBqJTLjxhZBCsvjrTH_cG0fkXlElG6BqTg",
  authDomain: "tose-ccf8f.firebaseapp.com",
  databaseURL: "https://tose-ccf8f-default-rtdb.europe-west1.firebasedatabase.app",
  projectId: "tose-ccf8f",
  storageBucket: "tose-ccf8f.firebasestorage.app",
  messagingSenderId: "475447495901",
  appId: "1:475447495901:web:9189276a162a3680afdf34",
  measurementId: "G-PWC5R6Q8JD"
};

const app = initializeApp(firebaseConfig);
const auth = getAuth(app);
const db = getDatabase(app);

// ðŸ”’ AUTH PROTECTION â€” BLOCK UNAUTHENTICATED USERS
onAuthStateChanged(auth, (user) => {
  if (!user) {
    window.location.href = "index.html";
  }
});

// ---------------------- NAVIGATION ----------------------
document.getElementById('profile').addEventListener('click', () => {
  window.location.href = 'profile.html';
});

document.getElementById('messages').addEventListener('click', () => {
  window.location.href = 'messages.html';
});

document.getElementById('prizesTab').addEventListener('click', () => {
  window.location.href = 'prizes.html';
});

document.getElementById('scoresTab').addEventListener('click', () => {
  window.location.href = 'scores.html';
});

document.getElementById('walletTab').addEventListener('click', () => {
  window.location.href = 'wallet.html';
});

// ---------------------- LOGOUT (REAL SIGN OUT) ----------------------
document.getElementById('logout').addEventListener('click', async () => {
  await signOut(auth);
  localStorage.clear(); // optional cleanup
  window.location.href = 'index.html';
});

// ---------------------- PLAY BUTTON SCHEDULE ----------------------
document.getElementById('playTab').addEventListener('click', () => {
  const now = new Date();
  const nowMinutes = now.getHours() * 60 + now.getMinutes();

  const restPeriods = [
    { start: 17 * 60 + 30, end: 18 * 60 },
    { start: 5 * 60 + 30, end: 6 * 60 }
  ];

  const inRest = restPeriods.some(period => {
    if (period.end < period.start) {
      return nowMinutes >= period.start || nowMinutes < period.end;
    }
    return nowMinutes >= period.start && nowMinutes < period.end;
  });

  if (inRest) {
    alert('GAME NOT RUNNING NOW (rest period)');
    return;
  }

  window.location.href = 'game.html';
});
</script>
</body>
</html>
